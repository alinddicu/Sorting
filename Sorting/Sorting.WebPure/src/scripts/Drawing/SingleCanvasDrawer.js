var Drawing;
(function (Drawing) {
    class SingleCanvasDrawer {
        constructor(sorting, document) {
            this.sorting = sorting;
            this.document = document;
        }
        getDivId() {
            return this.sorting.constructor.name.toLowerCase();
        }
        createCanvas(sortedNumbersCount) {
            const ratio = this.drawParams.step;
            const divId = this.getDivId();
            const canvasId = divId + "Canvas";
            let canvas = document.getElementById(canvasId);
            if (!canvas) {
                canvas = document.createElement("canvas");
                const div = document.getElementById(divId);
                while (div.firstChild) {
                    div.removeChild(div.firstChild);
                }
                div.appendChild(canvas);
            }
            canvas.height = (sortedNumbersCount + this.drawParams.startValue) * ratio;
            canvas.width = sortedNumbersCount * ratio;
            canvas.style.backgroundColor = this.drawParams.backgroundColor;
            return canvas;
        }
        drawCanvasBorder(canvas) {
            const context = canvas.getContext("2d");
            context.globalCompositeOperation = "source-over";
            context.lineWidth = 2;
            context.strokeStyle = this.drawParams.penColor;
            context.strokeRect(0, 0, canvas.width, canvas.height);
        }
        writeSortingText(canvasCtx) {
            canvasCtx.font = `${this.drawParams.fontSize}px Calibri`;
            const sorting = this.getDivId().split("sort")[0];
            const sortingFormatted = sorting[0].toUpperCase() + sorting.substr(1).toLowerCase();
            const duration = this.sorting.getDuration();
            const rank = this.sorting.getRank();
            const text = `${sortingFormatted} Sort (${duration}ms) ${Tools.OrdinalHelper.toOrdinal(rank)}`;
            canvasCtx.strokeText(text, 10, 20);
        }
        draw(drawParams) {
            this.drawParams = drawParams;
            const step = this.drawParams.step;
            const intermediateSorts = this.sorting.getIntermediateSorts();
            const sortedNumbersCount = intermediateSorts[0].length;
            const canvas = this.createCanvas(sortedNumbersCount);
            const canvasCtx = canvas.getContext("2d");
            canvasCtx.strokeStyle = this.drawParams.penColor;
            let i = 0;
            const refreshId = setInterval(() => {
                canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
                canvasCtx.beginPath();
                const intermediateSort = intermediateSorts[i++];
                for (let x = 0; x < intermediateSort.length; x++) {
                    const y = intermediateSort[x];
                    canvasCtx.moveTo(5 + x * step, canvas.height);
                    canvasCtx.lineTo(5 + x * step, canvas.height - y * step);
                    canvasCtx.stroke();
                }
                this.writeSortingText(canvasCtx);
                if (i === intermediateSorts.length) {
                    clearInterval(refreshId);
                }
            }, drawParams.delay);
        }
    }
    Drawing.SingleCanvasDrawer = SingleCanvasDrawer;
})(Drawing || (Drawing = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2luZ2xlQ2FudmFzRHJhd2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2luZ2xlQ2FudmFzRHJhd2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQVUsT0FBTyxDQW9GaEI7QUFwRkQsV0FBVSxPQUFPO0lBR2hCO1FBS0MsWUFBWSxPQUFpQixFQUFFLFFBQWtCO1lBQ2hELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQzFCLENBQUM7UUFFTyxRQUFRO1lBQ2YsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNwRCxDQUFDO1FBRU8sWUFBWSxDQUFDLGtCQUEwQjtZQUM5QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztZQUNuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDOUIsTUFBTSxRQUFRLEdBQUcsS0FBSyxHQUFHLFFBQVEsQ0FBQztZQUNsQyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBc0IsQ0FBQztZQUNwRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFzQixDQUFDO2dCQUMvRCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBbUIsQ0FBQztnQkFDN0QsT0FBTyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUM7b0JBQ3ZCLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNqQyxDQUFDO2dCQUNELEdBQUcsQ0FBQyxXQUFXLENBQW9CLE1BQU0sQ0FBQyxDQUFDO1lBQzVDLENBQUM7WUFFRCxNQUFN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QyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztvQkFDbEQsTUFBTSxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzlCLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUM5QyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO29CQUN6RCxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ3BCLENBQUM7Z0JBRUQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUNqQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDcEMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUMxQixDQUFDO1lBQ0YsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0QixDQUFDO0tBQ0Q7SUFoRlksMEJBQWtCLHFCQWdGOUIsQ0FBQTtBQUNGLENBQUMsRUFwRlMsT0FBTyxLQUFQLE9BQU8sUUFvRmhCIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIERyYXdpbmcge1xyXG5cdGltcG9ydCBTb3J0QmFzZSA9IEFsZ29yaXRobXMuU29ydEJhc2U7XHJcblxyXG5cdGV4cG9ydCBjbGFzcyBTaW5nbGVDYW52YXNEcmF3ZXIge1xyXG5cdFx0cHJpdmF0ZSBzb3J0aW5nOiBTb3J0QmFzZTtcclxuXHRcdHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50O1xyXG5cdFx0cHJpdmF0ZSBkcmF3UGFyYW1zOiBJRHJhd2luZ1BhcmFtcztcclxuXHJcblx0XHRjb25zdHJ1Y3Rvcihzb3J0aW5nOiBTb3J0QmFzZSwgZG9jdW1lbnQ6IERvY3VtZW50KSB7XHJcblx0XHRcdHRoaXMuc29ydGluZyA9IHNvcnRpbmc7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIGdldERpdklkKCk6IHN0cmluZyB7XHJcblx0XHRcdHJldHVybiB0aGlzLnNvcnRpbmcuY29uc3RydWN0b3IubmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHByaXZhdGUgY3JlYXRlQ2FudmFzKHNvcnRlZE51bWJlcnNDb3VudDogbnVtYmVyKTogSFRNTENhbnZhc0VsZW1lbnQge1xyXG5cdFx0XHRjb25zdCByYXRpbyA9IHRoaXMuZHJhd1BhcmFtcy5zdGVwO1xyXG5cdFx0XHRjb25zdCBkaXZJZCA9IHRoaXMuZ2V0RGl2SWQoKTtcclxuXHRcdFx0Y29uc3QgY2FudmFzSWQgPSBkaXZJZCArIFwiQ2FudmFzXCI7XHJcblx0XHRcdGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNJZCkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcblx0XHRcdGlmICghY2FudmFzKSB7XHJcblx0XHRcdFx0Y2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHRcdFx0XHRjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZJZCkgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblx0XHRcdFx0d2hpbGUgKGRpdi5maXJzdENoaWxkKSB7XHJcblx0XHRcdFx0XHRkaXYucmVtb3ZlQ2hpbGQoZGl2LmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRkaXYuYXBwZW5kQ2hpbGQ8SFRNTENhbnZhc0VsZW1lbnQ+KGNhbnZhcyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNhbnZhcy5oZWlnaHQgPSAoc29ydGVkTnVtYmVyc0NvdW50ICsgdGhpcy5kcmF3UGFyYW1zLnN0YXJ0VmFsdWUpICogcmF0aW87XHJcblx0XHRcdGNhbnZhcy53aWR0aCA9IHNvcnRlZE51bWJlcnNDb3VudCAqIHJhdGlvO1xyXG5cdFx0XHRjYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5kcmF3UGFyYW1zLmJhY2tncm91bmRDb2xvcjtcclxuXHJcblx0XHRcdHJldHVybiBjYW52YXM7XHJcblx0XHR9XHJcblxyXG5cdFx0cHJpdmF0ZSBkcmF3Q2FudmFzQm9yZGVyKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcclxuXHRcdFx0Y29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cdFx0XHRjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwic291cmNlLW92ZXJcIjtcclxuXHRcdFx0Y29udGV4dC5saW5lV2lkdGggPSAyO1xyXG5cdFx0XHRjb250ZXh0LnN0cm9rZVN0eWxlID0gdGhpcy5kcmF3UGFyYW1zLnBlbkNvbG9yO1xyXG5cdFx0XHRjb250ZXh0LnN0cm9rZVJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHRcdH1cclxuXHJcblx0XHRwcml2YXRlIHdyaXRlU29ydGluZ1RleHQoY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuXHRcdFx0Y2FudmFzQ3R4LmZvbnQgPSBgJHt0aGlzLmRyYXdQYXJhbXMuZm9udFNpemV9cHggQ2FsaWJyaWA7XHJcblx0XHRcdGNvbnN0IHNvcnRpbmcgPSB0aGlzLmdldERpdklkKCkuc3BsaXQoXCJzb3J0XCIpWzBdO1xyXG5cdFx0XHRjb25zdCBzb3J0aW5nRm9ybWF0dGVkID0gc29ydGluZ1swXS50b1VwcGVyQ2FzZSgpICsgc29ydGluZy5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0Y29uc3QgZHVyYXRpb24gPSB0aGlzLnNvcnRpbmcuZ2V0RHVyYXRpb24oKTtcclxuXHRcdFx0Y29uc3QgcmFuayA9IHRoaXMuc29ydGluZy5nZXRSYW5rKCk7XHJcblx0XHRcdGNvbnN0IHRleHQgPSBgJHtzb3J0aW5nRm9ybWF0dGVkfSBTb3J0ICgke2R1cmF0aW9ufW1zKSAke1Rvb2xzLk9yZGluYWxIZWxwZXIudG9PcmRpbmFsKHJhbmspfWA7XHJcblx0XHRcdGNhbnZhc0N0eC5zdHJva2VUZXh0KHRleHQsIDEwLCAyMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cHVibGljIGRyYXcoZHJhd1BhcmFtczogSURyYXdpbmdQYXJhbXMpOiB2b2lkIHtcclxuXHRcdFx0dGhpcy5kcmF3UGFyYW1zID0gZHJhd1BhcmFtcztcclxuXHRcdFx0Y29uc3Qgc3RlcCA9IHRoaXMuZHJhd1BhcmFtcy5zdGVwO1xyXG5cdFx0XHRjb25zdCBpbnRlcm1lZGlhdGVTb3J0cyA9IHRoaXMuc29ydGluZy5nZXRJbnRlcm1lZGlhdGVTb3J0cygpO1xyXG5cdFx0XHRjb25zdCBzb3J0ZWROdW1iZXJzQ291bnQgPSBpbnRlcm1lZGlhdGVTb3J0c1swXS5sZW5ndGg7XHJcblx0XHRcdGNvbnN0IGNhbnZhcyA9IHRoaXMuY3JlYXRlQ2FudmFzKHNvcnRlZE51bWJlcnNDb3VudCk7XHJcblx0XHRcdGNvbnN0IGNhbnZhc0N0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cdFx0XHRjYW52YXNDdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmRyYXdQYXJhbXMucGVuQ29sb3I7XHJcblxyXG5cdFx0XHRsZXQgaSA9IDA7XHJcblx0XHRcdGNvbnN0IHJlZnJlc2hJZCA9IHNldEludGVydmFsKCgpID0+IHtcclxuXHRcdFx0XHRjYW52YXNDdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblx0XHRcdFx0Y2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRcdGNvbnN0IGludGVybWVkaWF0ZVNvcnQgPSBpbnRlcm1lZGlhdGVTb3J0c1tpKytdO1xyXG5cdFx0XHRcdGZvciAobGV0IHggPSAwOyB4IDwgaW50ZXJtZWRpYXRlU29ydC5sZW5ndGg7IHgrKykge1xyXG5cdFx0XHRcdFx0Y29uc3QgeSA9IGludGVybWVkaWF0ZVNvcnRbeF07XHJcblx0XHRcdFx0XHRjYW52YXNDdHgubW92ZVRvKDUgKyB4ICogc3RlcCwgY2FudmFzLmhlaWdodCk7XHJcblx0XHRcdFx0XHRjYW52YXNDdHgubGluZVRvKDUgKyB4ICogc3RlcCwgY2FudmFzLmhlaWdodCAtIHkgKiBzdGVwKTtcclxuXHRcdFx0XHRcdGNhbnZhc0N0eC5zdHJva2UoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMud3JpdGVTb3J0aW5nVGV4dChjYW52YXNDdHgpO1xyXG5cdFx0XHRcdGlmIChpID09PSBpbnRlcm1lZGlhdGVTb3J0cy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwocmVmcmVzaElkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIGRyYXdQYXJhbXMuZGVsYXkpO1xyXG5cdFx0fVxyXG5cdH1cclxufSJdfQ==